import{b as G}from"./chunk-27SSKVYM.js";import{a as u,b as I,c as C,d as P,e as _,f as S,g as N,i as R,j as y}from"./chunk-WHBKGZ7H.js";import{Ba as w,O as f,Ya as g,_a as h,cb as b,ea as l,fa as a,ka as d,na as o,oa as s,pa as n,ra as v,xa as m}from"./chunk-CLYTRT3L.js";var M=class c{constructor(i,t,e,r){this.formBuilder=i;this.router=t;this.activatedRoute=e;this.authService=r;this.LOGIN=`/${b.LOGIN}`;this.errorMessage="";this.token=null;this.email=null;this.formGroup=this.formBuilder.group({password:["",u.required],confirm_password:["",u.required]})}ngOnInit(){this.token=this.activatedRoute.snapshot.paramMap.get("token"),this.activatedRoute.queryParamMap.subscribe(i=>{let t=i.get("email");this.email=t?decodeURIComponent(t):null}),console.log("Token:",this.token),console.log("Email:",this.email)}onResetPassword(){let i="";console.log("reset password");let t=this.formGroup.get("password")?.value,e=this.formGroup.get("confirm_password")?.value;if(this.formGroup.invalid){this.formGroup.markAllAsTouched();return}else this.authService.resetPassword(this.token,this.email,t,e).subscribe(r=>{r&&this.router.navigate([this.LOGIN])});this.errorMessage=i}static{this.\u0275fac=function(t){return new(t||c)(a(N),a(h),a(g),a(G))}}static{this.\u0275cmp=f({type:c,selectors:[["app-update-password"]],standalone:!0,features:[w],decls:17,vars:9,consts:[[1,"update-password-section"],[1,"centered-div","mt-8","mb-6"],["src","assets/favicons/update-password.svg","alt","Update Password Icon",1,"input-icon","mb-2"],[1,"text-2xl","font-semibold"],[1,"signup-section__form--form-element",3,"submit","formGroup"],[1,"mb-5"],[1,"text-white","text-sm","text-center","font-light","mb-3"],[1,"mb-2"],["type","password","placeholder","Enter new password",1,"flex-1",3,"formControlName","isInvalid","isPassword","errorMessage"],["type","password","placeholder","Confirm new password",1,"flex-1",3,"formControlName","isInvalid","isPassword","errorMessage"],["type","submit",1,"mb-12","mt-3","w-full","text-sm","text-white","bg-tangerine","border-0","py-2","px-6","focus:outline-none","hover:bg-orange-800","rounded-lg"]],template:function(t,e){if(t&1&&(o(0,"section",0)(1,"div",1),n(2,"img",2),o(3,"p",3),m(4,"Update Password"),s()(),o(5,"form",4),v("submit",function(){return e.onResetPassword()}),o(6,"div",5)(7,"p",6),m(8," Update your password for enhanced security. A fresh start "),n(9,"br"),m(10,"awaits! "),s(),o(11,"div",7),n(12,"app-input-field",8),s(),o(13,"div",7),n(14,"app-input-field",9),s()(),o(15,"button",10),m(16," Login "),s()()()),t&2){let r,p;l(5),d("formGroup",e.formGroup),l(7),d("formControlName","password")("isInvalid",((r=e.formGroup.get("password"))==null?null:r.invalid)&&((r=e.formGroup.get("password"))==null?null:r.touched))("isPassword",!0)("errorMessage",e.errorMessage),l(2),d("formControlName","confirm_password")("isInvalid",((p=e.formGroup.get("confirm_password"))==null?null:p.invalid)&&((p=e.formGroup.get("confirm_password"))==null?null:p.touched))("isPassword",!0)("errorMessage",e.errorMessage)}},dependencies:[y,R,P,I,C,_,S]})}};export{M as UpdatePasswordComponent};
